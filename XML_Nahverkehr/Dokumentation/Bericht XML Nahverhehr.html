<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/html" xml:lang="en" lang="en">

<head>
<meta name="generator" content="HTML Tidy for Mac OS X (vers 25 March 2009), see www.w3.org">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Bericht XML Nahverkehr</title>

<style type="text/css">
/*<![CDATA[*/
code           { font-family: monospace; }

div.constraint,
div.issue,
div.note,
div.notice     { margin-left: 2em; }

ol.enumar      { list-style-type: decimal; }
ol.enumla      { list-style-type: lower-alpha; }
ol.enumlr      { list-style-type: lower-roman; }
ol.enumua      { list-style-type: upper-alpha; }
ol.enumur      { list-style-type: upper-roman; }


div.exampleInner pre { margin-left: 1em;
                       margin-top: 0em; margin-bottom: 0em}
div.exampleOuter {border: 4px double gray;
                  margin: 0em; padding: 0em}
div.exampleInner { background-color: #d5dee3;
                   border-top-width: 4px;
                   border-top-style: double;
                   border-top-color: #d3d3d3;
                   border-bottom-width: 4px;
                   border-bottom-style: double;
                   border-bottom-color: #d3d3d3;
                   padding: 4px; margin: 0em }
div.exampleWrapper { margin: 4px }
div.exampleHeader { font-weight: bold;
                    margin: 4px}
/*]]>*/
</style>
<link rel="stylesheet" type="text/css" href="Bericht%20XML%20Nahverkehr/W3C-REC.css">

<!-- table of contents -->
<link rel="contents" title="Table of Contents" href="#table_of_contents">
<!-- bookmarks -->
<link rel="bookmark" title="link" href="#dt-link">
<!-- sections -->
<link rel="section" href="#intro" title="1 Introduction">
</head>



<!-- begin of body -->
<body>
<div class="head">
<h1><a name="title" id="title"></a>Bericht zum XML Projekt Nahverkehr</h1>
<dl>
<dt>15.01.2014</dt>
<dt>Autoren:</dt>
<dd>Andreas Bögelein</dd>
<dd>Marco Knappe</dd>
<dd>Mateo Luzi</dd>
</dl>


<hr>


<!-- begin of table_of_contents -->
<div class="toc">
<h2><a name="table_of_contents" id="table_of_contents"></a>Inhaltsverzeichnis</h2>
<div class="toc">
1 <a href="#einleitung">Einleitung</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;1.1 <a href="#grundlegendes-konzept">Grundlegendes Konzept</a><br>
2 <a href="#verwendete-technologien">Verwendete Technologien</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;2.1 <a href="#xml">Xml</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;2.2 <a href="#dtd">Dtd</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;2.3 <a href="#xslt">Xslt</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;2.4 <a href="#bootstrap">Bootstrap</a><br>
3 <a href="#konzept">Konzept</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;3.1 <a href="#datenhaltung">Datenhaltung</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.1 <a href="#datenhaltung-master">Master</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.2 <a href="#datenhaltung-stations">Stations</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.3 <a href="#datenhaltung-routes">Routes</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.4 <a href="#datenhaltung-schedules">Schedules</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.5 <a href="#datenhaltung-tickets">Tickets</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.6 <a href="#datenhaltung-drivers">Drivers</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.1.7 <a href="#datenhaltung-vehicles">Vehicles</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;3.2 <a href="#frontend">Frontend</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.2.1 <a href="#frontend-aufbau">Aufbau</a><br>
4 <a href="#ausblick">Ausblick</a><br>
<h3><a name="appendices" id="appendices"></a>Anhang</h3>
<div class="toc">A <a href="#quellen">Quellen</a><br>
</div>
</div>
</div>
</div>



<hr>


<!-- begin of document body  -->
<div class="body">

<div class="div1">
<h2><a name="einleitung" id="einleitung"></a>1 Einleitung</h2>
<p> ... </p>

<div class="div2">
<h3><a name="grundlegendes-konzept" id="grundlegendes-konzept"></a>1.1 Grundlegendes Konzept</h3>
<p> ... </p>
</div>
</div>

<div class="div1">
<h2><a name="verwendete-technologien" id="verwendete-technologien"></a>2 Verwendete Technologien</h2>
<p> ... </p>

<div class="div2">
<h3><a name="xml" id="xml"></a>2.1 Xml</h3>
<p> ... </p>
</div>

<div class="div2">
<h3><a name="dtd" id="dtd"></a>2.2 Dtd</h3>
<p> ... </p>
</div>

<div class="div2">
<h3><a name="xslt" id="xslt"></a>2.3 Xslt</h3>
<p> ... </p>
</div>

<div class="div2">
<h3><a name="bootstrap" id="bootstrap"></a>2.4 Bootstrap</h3>
<p> ... </p>
</div>
</div>

<div class="div1">
<h2><a name="konzept" id="konzept"></a>3 Konzept</h2>
<p> ... </p>

<div class="div2">
<h3><a name="datenhaltung" id="datenhaltung"></a>3.1 Datenhaltung</h3>
<p>Für die Datenhaltung wurden zunächst einige Xml-Dateien angelegt, die jeweils einen Teil aller Tabellen beinhalten. Der Grund hierfür war es die Komplexität zu zerbrechen und aufzuteilen. Das Resultat waren daraufhin die folgenden Tabellen:</p>
<ul>
<li>
<p>Haltestellen bzw. -stationen</p>
</li>
<li>
<p>Routen</p>
</li>
<li>
<p>Fahrpläne</p>
</li>
<li>
<p>Ticket- bzw. Fahrpreise</p>
</li>
<li>
<p>Fahrer</p>
</li>
<li>
<p>Fahrzeuge</p>
</li>
</ul>
<p>Um jedoch die einzelen Tabellen bzw. Xml-Dateien realisieren zu können, wurden unter anderem Identifikationsnummern als eindeutige Bezeichner eingesetzt. So hat zum Beispiel die Haltestelle "Hauptbahnhof" die Id "F5". Da nun aber auch Routen und Fahrpläne bezug auf Haltestellen nehmen, kommt es bei der Verwendung von mehreren Dateien zu Problemen.</p>
<p>Aus diesem Grund wurde eine "nv_master.xml" erstellt, die alle eigenständigen Dateien wieder vereinen soll. Es war jedoch nicht möglich nur mit Referenzen auf die Tabellen zu arbeiten. Deshalb haben wir uns für eine Masterdatei entschieden, die eine Konkatination aller Tabellen beinhaltet. Dies bringt zwar den Nachteil mit sich, das Auslagern der Komplexität in viele Dateien nicht machen zu können, hat jedoch den Vorteil Ids uneingeschränkt nutzen zu können.</p>
<p>Da es bei dem Zusammenmergen der einzelnen Dateien zu Konflikten kommen kann, sind Namesräume eingeführt worden. Jede ehemalige Xml-Datei hat nun ihren eingenen Namensraum. So ist der Namespace der "nv_station.xml" zum Beispiel "st".</p>

<div class="div3">
<h4><a name="datenhaltung-master" id="datenhaltung-master"></a>3.1.1 Master</h4>
<p>Um es noch ein mal zu erwähnen, besteht die Datenhaltung aus einer Datei, der sogenannten "nv_master.xml". Hierin befinden sich nun die nachfolgenden Entitäten:</p>
<ul>
<li>
<p>st:stations</p>
</li>
<li>
<p>rt:routes</p>
</li>
<li>
<p>sc:schedules</p>
</li>
<li>
<p>ti:tickets</p>
</li>
<li>
<p>dr:drivers</p>
</li>
<li>
<p>vh:vehicles</p>
</li>
</ul>
<p>Um dies noch zu verdeutlichen, vergleiche man dies mit dem nachfolgenden Diagramm.</p>
<img src="Bericht%20XML%20Nahverkehr/masterAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten des Masters">
</div>

<div class="div3">
<h4><a name="datenhaltung-stations" id="datenhaltung-stations"></a>3.1.2 Stations</h4>
<p>In der Entität Stations werden Haltestellen und -stationen verwaltet. Jede Station besitzt neben den Attributen stationId und name auch weiter Entitäten. Hierunter fallen stationTypes, street und ticketmachines.</p>
<p>Ersteres gibt die Art der Station an, was heißt, welche Fahrzeuge an dieser Station halten können. So kann unterschieden werden, ob es zum Beispiel eine Bushaltestelle oder ein U-Bahnhof ist. Bei street hadelt es sich um die Straße, in der diese Haltestelle zu finden ist. Bei ticketmachines können einzelne Automaten hinzugefügt werden, falls die jeweilige Station über ein solches Gerät verfügt.</p>
<p>Der Aufbau und die einzelenen Abhängigkeiten der Entitäten untereinader werden auch noch mal im nachfolgenden Diagramm deutlich.</p>
<img src="Bericht%20XML%20Nahverkehr/stationsAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten von Stations">
</div>

<div class="div3">
<h4><a name="datenhaltung-routes" id="datenhaltung-routes"></a>3.1.3 Routes</h4>
<p>Bei den Routen handelt es sich um Linien, wie man das von Bus- oder U-Bahn-Linien kennt. Es sind somit Pfade oder wie schon genannt Routen, die ein einzelnes Fahrzeug abfährt. Auf dem Weg hält es dabei an gewissen Stationen, die in einem Routenplan vermerkt sind. Dieser Routenplan wird in der Entität Routes abgebildet.</p>
<p>Eine Route besitzt neben ihren Attributen routeId und type, was hier zum Beispiel Bus oder U-Bahn sein kann, auch noch weitere Entitäten. Dies ist eine Liste aus Stationen, die einer Route zugeordnet sind. Jede dieser Stationen besitzt eine ReferenzId, welche auf die in <a href="#datenhaltung-stations">Abschnitt 3.1.2</a> erwähnten Stationen verweisen. So müssen die Stationen und dessen Attribute nur an einer Stelle in der Datenhaltung verwaltet werden.</p>
<p>Im Nachfolgendem ist dieser Sachverhalt nochmals anhand eines Diagramms dargestellt.</p>
<img src="Bericht%20XML%20Nahverkehr/routesAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten von Routes">
</div>

<div class="div3">
<h4><a name="datenhaltung-schedules" id="datenhaltung-schedules"></a>3.1.4 Schedules</h4>
<p>Unter dem Begriff Schedules muss man die einzelnen Fahrplanaushänge einer Haltestation verstehen. Jeder einzelne Aushang hat somit eine enge Verbindung zu der Haltestation und einer Route. Es ist das Verbindungsglied zwischen den in <a href="#datenhaltung-stations">Abschnitt 3.1.2</a> und <a href="#datenhaltung-routes">Abschnitt 3.1.3</a> erwähnten Entitäten.</p>
<p>Um so eine Verknüpfung zu realisieren, sind Ids und deren Referenzen nötig. So besitzt die Entität schedule eben zuvor genannte Attribute, man vergleiche hierzu auch nachfolgende Abbildung. Diese lauten somit im Detail:</p>
<ul>
<li>
<p><b>scheduleId:</b> Eindeutige Id für den jeweiligen Fahrplan.</p>
</li>
<li>
<p><b>stationId:</b> Referenz auf eine Id aus der in <a href="#datenhaltung-stations">Abschnitt 3.1.2</a> vorgestellten Entität.</p>
</li>
<li>
<p><b>routeId:</b> Referenz auf eine Id aus der in <a href="#datenhaltung-routes">Abschnitt 3.1.3</a> vorgestellten Entität.</p>
</li>
</ul>
<p>Darüber hinaus besitzt scheudule eine Entität namens depatureTimes. Dies sind die Abfahrtszeiten einer Linie an der jeweiligen Station. Die Entität depatureTimes verfügt zusätzlich noch über ein Attribut names finalStationId, was die Abfahrtsrichtung festlegt. Es wird somit nur eine Endhaltestelle mittels referenzierter Id angegeben. Ein Beispiel hierfür wäre: Die U-Bahn der Linie XY fährt in Richtung Endstation Hauptbahnhof.</p>
<p>Die Entität time ist ein Teil von depatureTimes. Dies sind letztendlich die einzelen Abfahrtszeiten eines Tages. Zur Vereinfachung bzw. zur Reduktion des Datenbestandes haben wir angenommen, dass die Abfahrtszeiten an jedem Tag in der Woche gleich sind.</p>
<img src="Bericht%20XML%20Nahverkehr/schedulesAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten von Schedules">
</div>

<div class="div3">
<h4><a name="datenhaltung-tickets" id="datenhaltung-tickets"></a>3.1.5 Tickets</h4>
<p>In der Entität tickets werden alle Fahr- bzw. Ticketpreise verwaltet, man vergleiche hierzu auch nachfolgendes Diagramm. So besitzt ein ticket das Attribut type, welches die Dauer bzw. die Gültigkeit der Fahrkarte angibt. Diese können unter anderem sein:</p>
<ul>
<li>
<p><b>single:</b> Ein Ticket für eine einfache Fahrt, ohne Rückfahrt oder ähnlichem.</p>
</li>
<li>
<p><b>day:</b> Ein Tagesticket, gültig für alle Verkehsmittel und in alle Richtung für einen Tag.</p>
</li>
<li>
<p><b>month:</b> Ein Monatsticket, gültig für alle Verkehsmittel und in alle Richtung für einen Monat.</p>
</li>
<li>
<p><b>...</b></p>
</li>
</ul>
<p>Desweiteren besizt ticket noch zwei Entitäten. Erstens description, was eine Beschreibung der Ticketform in ein oder zwei Sätzen ist und zweitens fares, was die Tarifzone beschreibt. Hierbei werden meist um den Kern einer Stadt Kreise gelegt. Je weiter man sich nun von diesem Kern mit öffenlichen Verkehsmitteln entfernen möchte, in umso höhere Preisklassen kommt man.</p>
<p>Mit den Attributen in fare werden nun diese Kreise festgelegt. type beschreibt bzw. benennt dabei den jeweiligen Kreis oder Tarifzone. In price wird dann der eigentliche Ticketpreis festgelegt.</p>
<img src="Bericht%20XML%20Nahverkehr/ticketsAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten von Tickets">
</div>

<div class="div3">
<h4><a name="datenhaltung-drivers" id="datenhaltung-drivers"></a>3.1.6 Drivers</h4>
<p>Die Entität drivers beinhaltet alle Angestellten des Nahverkehrsystems, die die Lizenz haben ein Fahrzeug zu bedienen. Man vergleiche dies hierzu auch mit nachfolgender Abbildung. Es werden in dieser Entity alle Relevanten Informationen über die Fahrer abgespeichert. So besitzt die Entität Driver zunächst die folgenden Attribute:</p>
<ul>
<li>
<p><b>driverId:</b> Eine eindeutige Id.</p>
</li>
<li>
<p><b>firstname:</b> Der Vorname des Fahrers.</p>
</li>
<li>
<p><b>Lastname:</b> Der Nachname des Fahrers.</p>
</li>
<li>
<p><b>phone:</b> Die private Telefonnummer des Fahrers.</p>
</li>
</ul>
<p>Desweiteren besitzt driver noch Entitäten wie vehicle und homeaddress. Letzeres verwaltet die Adresse des Fahrers. Hierzu ist diese in weiteren Entitäten aufgeteilt:</p>
<ul>
<li>
<p><b>street:</b> Straße</p>
</li>
<li>
<p><b>houseNo:</b> Hausnummer</p>
</li>
<li>
<p><b>areacode:</b> Postleitzahl</p>
</li>
<li>
<p><b>town:</b> Ort</p>
</li>
</ul>
<p>Die Letzte Entität ist nun vehicle. Dies können dabei mehrere sein und geben jeweils an, welche Typ von Fahrzeugen der jeweilige Fahrer bedienen darf bzw. wofür eine entsprechende Lizenz vorliegt. Diese Typen können zum Beispiel sein: subway, bus, tram ...</p>
<img src="Bericht%20XML%20Nahverkehr/driversAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten von Drivers">
</div>

<div class="div3">
<h4><a name="datenhaltung-vehicles" id="datenhaltung-vehicles"></a>3.1.7 Vehicles</h4>
<p>Die Beschreibungen eines Fahrzeuges wurden recht einfach gehalten und bestehen an sich nur aus einer einzigen Entität. Diese hat jedoch einige Attribute:</p>
<ul>
<li>
<p><b>type:</b> Der Typ eines Fahrzeuges, wie zum Beispiel: subway, bus, tram, city-train ...</p>
</li>
<li>
<p><b>licensePlate:</b> Das eindeutige Nummernschild des jeweiligen Fahrzeugs.</p>
</li>
<li>
<p><b>capacity:</b> Die maximale Anzahl an zugelassenen Passagieren.</p>
</li>
<li>
<p><b>buildYear:</b> Das Baujahr des jeweiligen Fahrzeugs.</p>
</li>
</ul>
<img src="Bericht%20XML%20Nahverkehr/vehiclesAbhaenigkeiten.png" alt="Entity Relationship Diagramm: Abhängigkeiten von Vehicles">
</div>
</div>

<div class="div2">
<h3><a name="frontend" id="frontend"></a>3.2 Frontend</h3>
<p> ... </p>

<div class="div3">
<h4><a name="frontend-aufbau" id="frontend-aufbau"></a>3.2.1 Aufbau</h4>
<p> ... </p>
</div>
</div>
</div>

<div class="div1">
<h2><a name="ausblick" id="ausblick"></a>4 Ausblick</h2>
<p> ... </p>
</div>
    
</div>


<div class="back">
<div class="div1">
<h2><a name="quellen" id="quellen"></a>A Quellen</h2>
</div>
</div>

</body>
</html>